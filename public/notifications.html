<!doctype html>
<html><head><meta charset="utf-8"><title>Notifications</title><meta name="viewport" content="width=device-width,initial-scale=1"><link href="/style.css" rel="stylesheet"></head><body>
<div class="container"><div class="header"><div class="logo">Notifications</div><div class="user"></div></div>
<div id="notes"></div>
</div>
<script src="/app.js"></script>
<script>
async function load(){ const r = await getJSON('/api/notifications', true); if(!r.ok){ document.getElementById('notes').innerHTML='<div class="card muted">Login to see notifications</div>'; return; } const j = await r.json(); if(!j.length){ document.getElementById('notes').innerHTML='<div class="card muted">No notifications</div>'; return; } document.getElementById('notes').innerHTML = j.map(n=>`<div class="card"><div style="font-weight:700">${n.type}</div><div class="small muted">${new Date(n.createdAt).toLocaleString()}</div><div style="margin-top:6px">${JSON.stringify(n.payload)}</div><div style="margin-top:8px"><button class="btn" onclick="mark('${n._id}')">Mark read</button></div></div>`).join(''); }
async function mark(id){ await postJSON('/api/notifications/'+encodeURIComponent(id)+'/read', {}, true); load(); }
load(); updateHeader();
</script>
</body></html>